!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class r{constructor(e,t){this.x=e,this.y=t}get cross(){return[new r(this.x+1,this.y),new r(this.x-1,this.y),new r(this.x,this.y+1),new r(this.x,this.y-1)]}}const i=new r(0,0),o=new r(9,9);var a=new class{constructor(e=10,t=10){this.width=e,this.height=t,this.space=new Array(e*t)}isInside(e){return e.x>=0&&e.x<this.width&&e.y>=0&&e.y<this.height}getValue(e){return this.space[e.x+this.width*e.y]}setValue(e,t){this.space[e.x+this.width*e.y]=t}clearSpace(){this.space=this.space.fill(0)}getVector(e){return new r(e%this.width,Math.floor(e/this.width))}getVectorsWithValue(e){let t=[];return this.space.forEach((n,r)=>{n===e&&t.push(this.getVector(r))}),t}};const s=e=>{for(let t=e.space.length-1;t>=0;t--)"W"!==e.space[t]&&"S"!==e.space[t]&&"E"!==e.space[t]&&(e.space[t]=0);return e},c=e=>{i.cross.forEach(t=>{e.isInside(t)&&0===e.getValue(t)&&e.setValue(t,1)});for(let t=1;e.space.includes(0);t++){let n=[],r=[];if(e.getVectorsWithValue(t).forEach(e=>{n=n.concat(e.cross)}),n.forEach(t=>{e.isInside(t)&&r.push(e.getValue(t))}),-1===r.indexOf(0))break;if(-1!==r.indexOf("E"))break;n.forEach(n=>{e.isInside(n)&&0===e.getValue(n)&&e.setValue(n,t+1)})}},u=e=>{let t=document.getElementById("maze").children;e.space.forEach((e,n)=>{t[n].dataset.value=e})},l=()=>{s(a),c(a);let e=(e=>{let t,n=[],r=1/0;if(void 0===(t=o.cross.find(t=>{if(!e.isInside(t))return!1;let n=e.getValue(t);return!(!Number.isInteger(n)||0===n)&&(r=Math.min(r,n))===n})))return alert("This maze doesn't have solutions"),void(n=[]);for(n.unshift(t);r>1;)t=t.cross.find(t=>{if(!e.isInside(t))return!1;let n=e.getValue(t);return!(!Number.isInteger(n)||0===n)&&(r=Math.min(r,n))===n}),n.unshift(t);return n})(a);(f=e)&&f.forEach(e=>{a.setValue(e,"R")}),document.getElementById("answer").innerText=e?e.length:"##"};var f;const d=()=>{a.clearSpace(),a.setValue(i,"S"),a.setValue(o,"E"),u(a)};n(5);document.getElementById("control").addEventListener("click",e=>{const t=e.target;if("BUTTON"===t.tagName)switch(t.id){case"run":l(),u(a);break;case"reset":d()}}),document.getElementById("maze").addEventListener("click",e=>{const t=e.target;if("maze__cell"!==t.className)return;let n=t.dataset;"W"===n.value?(n.value="",a.space[n.index]=0):(n.value="W",a.space[n.index]="W"),s(a),u(a)}),a.setValue(i,"S"),a.setValue(o,"E"),a.setValue(new r(1,0),"W"),a.setValue(new r(1,1),"W"),s(a),c(a),u(a)},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,u=0,l=[],f=n(1);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(m(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(m(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function g(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),h(e,t),t}function b(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function m(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=u++;n=c||(c=g(t)),r=x.bind(null,n,a,!1),i=x.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=f(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){v(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}e&&d(p(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var y,w=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function x(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){(e.exports=n(3)(!1)).push([e.i,"body {\r\n    font-family: sans-serif;\r\n}\r\n.maze {\r\n    display: grid;\r\n    grid: repeat(10, 25px) / repeat(10, 25px);\r\n}\r\n.maze__cell {\r\n    box-sizing: border-box;\r\n    border: thin dashed lightgray;\r\n}\r\n[data-value = W] {\r\n    background-color: black;\r\n}\r\n[data-value = R] {\r\n    background-image: radial-gradient(circle at center, black 20%, transparent 20%);\r\n}\r\n[data-value = S] {\r\n    background-image: radial-gradient(circle at center, black 50%, transparent 50%);\r\n}\r\n[data-value = E] {\r\n    background-image: radial-gradient(circle at center, transparent 20%, black 20%, black 50%, transparent 50%);\r\n}\r\n\r\n.control {\r\n    padding: 10px;\r\n}\r\n.control__button {\r\n    width: 50px;\r\n    height: 20px;\r\n}",""])},function(e,t,n){var r=n(4);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,i);r.locals&&(e.exports=r.locals)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3ZlY3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29uc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2dyaWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2ZpbGwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5jc3M/NzUyOCJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVmVjdG9yIiwiW29iamVjdCBPYmplY3RdIiwieCIsInkiLCJ0aGlzIiwiY3Jvc3MiLCJzdGFydFBvaW50IiwiZW5kUG9pbnQiLCJtYXplR3JpZCIsIndpZHRoIiwiaGVpZ2h0Iiwic3BhY2UiLCJBcnJheSIsInZlY3RvciIsImZpbGwiLCJpbmRleCIsIk1hdGgiLCJmbG9vciIsInZlY3RvcnNBcnJheSIsImZvckVhY2giLCJlbGVtZW50IiwicHVzaCIsImdldFZlY3RvciIsImZpbGxaZXJvcyIsImdyaWQiLCJsZW5ndGgiLCJmaWxsV2F2ZXMiLCJmaXJzdFR1cm5WZWN0b3IiLCJpc0luc2lkZSIsImdldFZhbHVlIiwic2V0VmFsdWUiLCJ0dXJuTnVtYmVyIiwiaW5jbHVkZXMiLCJ0YXJnZXRWZWN0b3JzQXJyYXkiLCJ0YXJnZXRWYWx1ZXNBcnJheSIsImdldFZlY3RvcnNXaXRoVmFsdWUiLCJ2ZWN0b3JQcmV2IiwiY29uY2F0IiwiaW5kZXhPZiIsImRpc3BsYXkiLCJtYXplQ2VsbHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGRyZW4iLCJkYXRhc2V0IiwicnVuIiwicm91dGUiLCJmaWxsZWRHcmlkIiwicHJldlN0ZXAiLCJwcmV2U3RlcFZhbHVlIiwiSW5maW5pdHkiLCJ1bmRlZmluZWQiLCJmaW5kIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwibWluIiwiYWxlcnQiLCJ1bnNoaWZ0IiwiZ2V0TWF6ZVJvdXRlIiwicm91dGVBcnJheSIsImlubmVyVGV4dCIsImJyb3dzZXJfcmVzZXQiLCJjbGVhclNwYWNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwiaWQiLCJjbGFzc05hbWUiLCJjc3MiLCJsb2NhdGlvbiIsIndpbmRvdyIsIkVycm9yIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwibmV3VXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmbiIsIm1lbW8iLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJhbGwiLCJhdG9iIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJnZXRFbGVtZW50Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInN0eWxlc0luc2VydGVkQXRUb3AiLCJmaXhVcmxzIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJvcHRpb25zIiwiaXRlbSIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibGlzdCIsIm5ld1N0eWxlcyIsImJhc2UiLCJwYXJ0IiwibWVkaWEiLCJzb3VyY2VNYXAiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImluc2VydEludG8iLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsImluc2VydEF0IiwibmV4dFNpYmxpbmciLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsImZpcnN0Q2hpbGQiLCJiZWZvcmUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXR0cnMiLCJ0eXBlIiwiYWRkQXR0cnMiLCJlbCIsImtleXMiLCJrZXkiLCJzZXRBdHRyaWJ1dGUiLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJ0cmFuc2Zvcm0iLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImJpbmQiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJCbG9iIiwiYnRvYSIsImxpbmsiLCJyZWwiLCJjcmVhdGVMaW5rRWxlbWVudCIsImF1dG9GaXhVcmxzIiwiY29udmVydFRvQWJzb2x1dGVVcmxzIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJibG9iIiwib2xkU3JjIiwiaHJlZiIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3JlYXRlVGV4dE5vZGUiLCJuZXdPYmoiLCJERUJVRyIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvaW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsInVzZVNvdXJjZU1hcCIsInRvU3RyaW5nIiwibWFwIiwiY29udGVudCIsImNzc01hcHBpbmciLCJzb3VyY2VNYXBwaW5nIiwic291cmNlVVJMcyIsInNvdXJjZXMiLCJzb3VyY2UiLCJzb3VyY2VSb290IiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiaG1yIiwibG9jYWxzIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLCtDQ25FQUMsRUFDQUMsWUFBQUMsRUFBQUMsR0FDQUMsS0FBQUYsSUFDQUUsS0FBQUQsSUFFQUUsWUFDQSxPQUNBLElBQUFMLEVBQUFJLEtBQUFGLEVBQUEsRUFBQUUsS0FBQUQsR0FDQSxJQUFBSCxFQUFBSSxLQUFBRixFQUFBLEVBQUFFLEtBQUFELEdBQ0EsSUFBQUgsRUFBQUksS0FBQUYsRUFBQUUsS0FBQUQsRUFBQSxHQUNBLElBQUFILEVBQUFJLEtBQUFGLEVBQUFFLEtBQUFELEVBQUEsS0NQQSxNQUFBRyxFQUFBLElBQUFOLEVBQUEsS0FDQU8sRUFBQSxJQUFBUCxFQUFBLEtBUUEsSUFBQVEsRUFBQSxVQ1RBUCxZQUFBUSxFQUFBLEdBQUFDLEVBQUEsSUFDQU4sS0FBQUssUUFDQUwsS0FBQU0sU0FDQU4sS0FBQU8sTUFBQSxJQUFBQyxNQUFBSCxFQUFBQyxHQUdBVCxTQUFBWSxHQUNBLE9BQUFBLEVBQUFYLEdBQUEsR0FBQVcsRUFBQVgsRUFBQUUsS0FBQUssT0FDQUksRUFBQVYsR0FBQSxHQUFBVSxFQUFBVixFQUFBQyxLQUFBTSxPQUVBVCxTQUFBWSxHQUNBLE9BQUFULEtBQUFPLE1BQUFFLEVBQUFYLEVBQUFFLEtBQUFLLE1BQUFJLEVBQUFWLEdBRUFGLFNBQUFZLEVBQUF0QixHQUNBYSxLQUFBTyxNQUFBRSxFQUFBWCxFQUFBRSxLQUFBSyxNQUFBSSxFQUFBVixHQUFBWixFQUVBVSxhQUNBRyxLQUFBTyxNQUFBUCxLQUFBTyxNQUFBRyxLQUFBLEdBRUFiLFVBQUFjLEdBQ0EsV0FBQWYsRUFBQWUsRUFBQVgsS0FBQUssTUFBQU8sS0FBQUMsTUFBQUYsRUFBQVgsS0FBQUssUUFFQVIsb0JBQUFWLEdBQ0EsSUFBQTJCLEtBTUEsT0FMQWQsS0FBQU8sTUFBQVEsUUFBQSxDQUFBQyxFQUFBTCxLQUNBSyxJQUFBN0IsR0FDQTJCLEVBQUFHLEtBQUFqQixLQUFBa0IsVUFBQVAsTUFHQUcsSUM5QkEsTUFBQUssRUFBQUMsSUFDQSxRQUFBakQsRUFBQWlELEVBQUFiLE1BQUFjLE9BQUEsRUFBdUNsRCxHQUFBLEVBQVFBLElGTS9DLE1FTEFpRCxFQUFBYixNQUFBcEMsSUZHQSxNRUZBaUQsRUFBQWIsTUFBQXBDLElGR0EsTUVGQWlELEVBQUFiLE1BQUFwQyxLQUVBaUQsRUFBQWIsTUFBQXBDLEdBQUEsR0FHQSxPQUFBaUQsR0FJQUUsRUFBQUYsSUFFQWxCLEVBQUFELE1BQUFjLFFBQUFRLElBQ0FILEVBQUFJLFNBQUFELElBQUEsSUFBQUgsRUFBQUssU0FBQUYsSUFDQUgsRUFBQU0sU0FBQUgsRUFBQSxLQUlBLFFBQUFJLEVBQUEsRUFBNEJQLEVBQUFiLE1BQUFxQixTQUFBLEdBQXdCRCxJQUFBLENBQ3BELElBQ0FFLEtBQ0FDLEtBVUEsR0FaQVYsRUFBQVcsb0JBQUFKLEdBSUFaLFFBQUFpQixJQUNBSCxJQUFBSSxPQUFBRCxFQUFBL0IsU0FFQTRCLEVBQUFkLFFBQUFOLElBQ0FXLEVBQUFJLFNBQUFmLElBQ0FxQixFQUFBYixLQUFBRyxFQUFBSyxTQUFBaEIsT0FHQSxJQUFBcUIsRUFBQUksUUFBQSxHQUVBLE1BRUEsUUFBQUosRUFBQUksUUZoQ0EsS0VrQ0EsTUFHQUwsRUFBQWQsUUFBQU4sSUFDQVcsRUFBQUksU0FBQWYsSUFBQSxJQUFBVyxFQUFBSyxTQUFBaEIsSUFDQVcsRUFBQU0sU0FBQWpCLEVBQUFrQixFQUFBLE9DZkFRLEVBQUFmLElBQ0EsSUFBQWdCLEVBQUFDLFNBQUFDLGVBQUEsUUFBQUMsU0FDQW5CLEVBQUFiLE1BQUFRLFFBQUEsQ0FBQTVCLEVBQUFoQixLQUNBaUUsRUFBQWpFLEdBQUFxRSxRQUFBckQsV0FJQXNELEVBQUEsS0FDQXRCLEVBQUFmLEdBQ0FrQixFQUFBbEIsR0FDQSxJQUFBc0MsRURXQSxDQUFBQyxJQUNBLElBQ0FDLEVBREFGLEtBRUFHLEVBQUFDLElBYUEsUUFBQUMsS0FYQUgsRUFBQXpDLEVBQUFGLE1BQUErQyxLQUFBdkMsSUFDQSxJQUFBa0MsRUFBQW5CLFNBQUFmLEdBQUEsU0FFQSxJQUFBdEIsRUFBQXdELEVBQUFsQixTQUFBaEIsR0FFQSxTQUFBd0MsT0FBQUMsVUFBQS9ELElBQUEsSUFBQUEsS0FFQTBELEVBQUFqQyxLQUFBdUMsSUFBQU4sRUFBQTFELE1BQ0FBLEtBTUEsT0FGQWlFLE1BQUEseUNBQ0FWLE1BS0EsSUFGQUEsRUFBQVcsUUFBQVQsR0FFQUMsRUFBQSxHQUNBRCxJQUFBM0MsTUFBQStDLEtBQUF2QyxJQUNBLElBQUFrQyxFQUFBbkIsU0FBQWYsR0FBQSxTQUVBLElBQUF0QixFQUFBd0QsRUFBQWxCLFNBQUFoQixHQUVBLFNBQUF3QyxPQUFBQyxVQUFBL0QsSUFBQSxJQUFBQSxLQUVBMEQsRUFBQWpDLEtBQUF1QyxJQUFBTixFQUFBMUQsTUFDQUEsSUFFQXVELEVBQUFXLFFBQUFULEdBRUEsT0FBQUYsR0MvQ0FZLENBQUFsRCxJRGtEQW1ELEVDakRBYixJRHNEQWEsRUFBQXhDLFFBQUFOLElBQ0FMLEVBQUFzQixTQUFBakIsRUZ4RkEsT0drQ0E0QixTQUFBQyxlQUFBLFVBQUFrQixVQUFBZCxJQUFBckIsT0FBQSxNRGdEQSxJQUFBa0MsRUM3Q0EsTUFBQUUsRUFBQSxLQUNBckQsRUFBQXNELGFBQ0F0RCxFQUFBc0IsU0FBQXhCLEVIMUNBLEtHMkNBRSxFQUFBc0IsU0FBQXZCLEVIMUNBLEtHMkNBZ0MsRUFBQS9CLFNDNUNBaUMsU0FBQUMsZUFBQSxXQUFBcUIsaUJBQUEsUURXQUMsSUFDQSxNQUFBQyxFQUFBRCxFQUFBQyxPQUNBLGNBQUFBLEVBQUFDLFFBQ0EsT0FBQUQsRUFBQUUsSUFDQSxVQUNBdEIsSUFDQU4sRUFBQS9CLEdBQ0EsTUFDQSxZQUNBcUQsT0NuQkFwQixTQUFBQyxlQUFBLFFBQUFxQixpQkFBQSxRRExBQyxJQUNBLE1BQUFDLEVBQUFELEVBQUFDLE9BQ0Esa0JBQUFBLEVBQUFHLFVBQUEsT0FDQSxJQUFBeEIsRUFBQXFCLEVBQUFyQixRQUNBLE1BQUFBLEVBQUFyRCxPQUNBcUQsRUFBQXJELE1BQUEsR0FDQWlCLEVBQUFHLE1BQUFpQyxFQUFBN0IsT0FBQSxJQUVBNkIsRUFBQXJELE1BQUEsSUFDQWlCLEVBQUFHLE1BQUFpQyxFQUFBN0IsT0FBQSxLQUVBUSxFQUFBZixHQUNBK0IsRUFBQS9CLEtDTEFBLEVBQUFzQixTQUFBeEIsRUpIQSxLSUlBRSxFQUFBc0IsU0FBQXZCLEVKSEEsS0lLQUMsRUFBQXNCLFNBQUEsSUFBQTlCLEVBQUEsS0pKQSxLSUtBUSxFQUFBc0IsU0FBQSxJQUFBOUIsRUFBQSxLSkxBLEtJT0F1QixFQUFBZixHQUNBa0IsRUFBQWxCLEdBQ0ErQixFQUFBL0Isa0JDSkFsQyxFQUFBRCxRQUFBLFNBQUFnRyxHQUVBLElBQUFDLEVBQUEsb0JBQUFDLGVBQUFELFNBRUEsSUFBQUEsRUFDQSxVQUFBRSxNQUFBLG9DQUlBLElBQUFILEdBQUEsaUJBQUFBLEVBQ0EsT0FBQUEsRUFHQSxJQUFBSSxFQUFBSCxFQUFBSSxTQUFBLEtBQUFKLEVBQUFLLEtBQ0FDLEVBQUFILEVBQUFILEVBQUFPLFNBQUFDLFFBQUEsaUJBMkRBLE9BL0JBVCxFQUFBUyxRQUFBLCtEQUFBQyxFQUFBQyxHQUVBLElBV0FDLEVBWEFDLEVBQUFGLEVBQ0FHLE9BQ0FMLFFBQUEsb0JBQUE5RixFQUFBb0csR0FBd0MsT0FBQUEsSUFDeENOLFFBQUEsb0JBQUE5RixFQUFBb0csR0FBd0MsT0FBQUEsSUFHeEMsMERBQUFDLEtBQUFILEdBQ0FILEdBUUFFLEVBRkEsSUFBQUMsRUFBQTVDLFFBQUEsTUFFQTRDLEVBQ0csSUFBQUEsRUFBQTVDLFFBQUEsS0FFSG1DLEVBQUFTLEVBR0FOLEVBQUFNLEVBQUFKLFFBQUEsWUFJQSxPQUFBUSxLQUFBQyxVQUFBTixHQUFBLHlCQzlFQSxJQUVBTyxFQUNBQyxFQUhBQyxLQVdBQyxHQVRBSCxFQVNBLFdBTUEsT0FBQWpCLFFBQUE5QixtQkFBQW1ELE1BQUFyQixPQUFBc0IsTUFaQSxXQUVBLFlBREEsSUFBQUosTUFBQUQsRUFBQU0sTUFBQTFGLEtBQUEyRixZQUNBTixJQWlCQU8sRUFBQSxTQUFBUixHQUNBLElBQUFDLEtBRUEsZ0JBQUF4QixHQU1BLHNCQUFBQSxFQUNBLE9BQUFBLElBRUEsWUFBQXdCLEVBQUF4QixHQUFBLENBQ0EsSUFBQWdDLEVBakJBLFNBQUFoQyxHQUNBLE9BQUF4QixTQUFBeUQsY0FBQWpDLElBZ0JBdkYsS0FBQTBCLEtBQUE2RCxHQUVBLEdBQUFNLE9BQUE0QixtQkFBQUYsYUFBQTFCLE9BQUE0QixrQkFDQSxJQUdBRixJQUFBRyxnQkFBQUMsS0FDSyxNQUFBckMsR0FDTGlDLEVBQUEsS0FHQVIsRUFBQXhCLEdBQUFnQyxFQUVBLE9BQUFSLEVBQUF4QixJQTFCQSxHQThCQXFDLEVBQUEsS0FDQUMsRUFBQSxFQUNBQyxLQUVBQyxFQUFBdEksRUFBQSxHQXFEQSxTQUFBdUksRUFBQUMsRUFBQUMsR0FDQSxRQUFBckksRUFBQSxFQUFnQkEsRUFBQW9JLEVBQUFsRixPQUFtQmxELElBQUEsQ0FDbkMsSUFBQXNJLEVBQUFGLEVBQUFwSSxHQUNBdUksRUFBQXBCLEVBQUFtQixFQUFBMUMsSUFFQSxHQUFBMkMsRUFBQSxDQUNBQSxFQUFBQyxPQUVBLFFBQUFDLEVBQUEsRUFBaUJBLEVBQUFGLEVBQUFHLE1BQUF4RixPQUEyQnVGLElBQzVDRixFQUFBRyxNQUFBRCxHQUFBSCxFQUFBSSxNQUFBRCxJQUdBLEtBQVFBLEVBQUFILEVBQUFJLE1BQUF4RixPQUF1QnVGLElBQy9CRixFQUFBRyxNQUFBNUYsS0FBQTZGLEVBQUFMLEVBQUFJLE1BQUFELEdBQUFKLFFBRUcsQ0FDSCxJQUFBSyxLQUVBLElBQUFELEVBQUEsRUFBaUJBLEVBQUFILEVBQUFJLE1BQUF4RixPQUF1QnVGLElBQ3hDQyxFQUFBNUYsS0FBQTZGLEVBQUFMLEVBQUFJLE1BQUFELEdBQUFKLElBR0FsQixFQUFBbUIsRUFBQTFDLEtBQTJCQSxHQUFBMEMsRUFBQTFDLEdBQUE0QyxLQUFBLEVBQUFFLFdBSzNCLFNBQUFFLEVBQUFDLEVBQUFSLEdBSUEsSUFIQSxJQUFBRCxLQUNBVSxLQUVBOUksRUFBQSxFQUFnQkEsRUFBQTZJLEVBQUEzRixPQUFpQmxELElBQUEsQ0FDakMsSUFBQXNJLEVBQUFPLEVBQUE3SSxHQUNBNEYsRUFBQXlDLEVBQUFVLEtBQUFULEVBQUEsR0FBQUQsRUFBQVUsS0FBQVQsRUFBQSxHQUlBVSxHQUFjbEQsSUFIZHdDLEVBQUEsR0FHY1csTUFGZFgsRUFBQSxHQUVjWSxVQURkWixFQUFBLElBR0FRLEVBQUFsRCxHQUNBa0QsRUFBQWxELEdBQUE4QyxNQUFBNUYsS0FBQWtHLEdBREFaLEVBQUF0RixLQUFBZ0csRUFBQWxELElBQWtEQSxLQUFBOEMsT0FBQU0sS0FJbEQsT0FBQVosRUFHQSxTQUFBZSxFQUFBZCxFQUFBZSxHQUNBLElBQUExRCxFQUFBK0IsRUFBQVksRUFBQWdCLFlBRUEsSUFBQTNELEVBQ0EsVUFBQU8sTUFBQSwrR0FHQSxJQUFBcUQsRUFBQXJCLElBQUEvRSxPQUFBLEdBRUEsV0FBQW1GLEVBQUFrQixTQUNBRCxFQUVHQSxFQUFBRSxZQUNIOUQsRUFBQStELGFBQUFMLEVBQUFFLEVBQUFFLGFBRUE5RCxFQUFBZ0UsWUFBQU4sR0FKQTFELEVBQUErRCxhQUFBTCxFQUFBMUQsRUFBQWlFLFlBTUExQixFQUFBbkYsS0FBQXNHLFFBQ0UsY0FBQWYsRUFBQWtCLFNBQ0Y3RCxFQUFBZ0UsWUFBQU4sT0FDRSxxQkFBQWYsRUFBQWtCLFdBQUFsQixFQUFBa0IsU0FBQUssT0FJRixVQUFBM0QsTUFBQSw4TEFIQSxJQUFBdUQsRUFBQS9CLEVBQUFZLEVBQUFnQixXQUFBLElBQUFoQixFQUFBa0IsU0FBQUssUUFDQWxFLEVBQUErRCxhQUFBTCxFQUFBSSxJQU1BLFNBQUFLLEVBQUFULEdBQ0EsVUFBQUEsRUFBQVUsV0FBQSxTQUNBVixFQUFBVSxXQUFBQyxZQUFBWCxHQUVBLElBQUFZLEVBQUEvQixFQUFBbEUsUUFBQXFGLEdBQ0FZLEdBQUEsR0FDQS9CLEVBQUFnQyxPQUFBRCxFQUFBLEdBSUEsU0FBQUUsRUFBQTdCLEdBQ0EsSUFBQWUsRUFBQWxGLFNBQUFpRyxjQUFBLFNBU0EsWUFQQXZGLElBQUF5RCxFQUFBK0IsTUFBQUMsT0FDQWhDLEVBQUErQixNQUFBQyxLQUFBLFlBR0FDLEVBQUFsQixFQUFBZixFQUFBK0IsT0FDQWpCLEVBQUFkLEVBQUFlLEdBRUFBLEVBaUJBLFNBQUFrQixFQUFBQyxFQUFBSCxHQUNBMUosT0FBQThKLEtBQUFKLEdBQUF4SCxRQUFBLFNBQUE2SCxHQUNBRixFQUFBRyxhQUFBRCxFQUFBTCxFQUFBSyxNQUlBLFNBQUE5QixFQUFBZ0MsRUFBQXRDLEdBQ0EsSUFBQWUsRUFBQXdCLEVBQUFDLEVBQUFDLEVBR0EsR0FBQXpDLEVBQUEwQyxXQUFBSixFQUFBN0UsSUFBQSxDQUdBLEtBRkFnRixFQUFBekMsRUFBQTBDLFVBQUFKLEVBQUE3RSxNQVNBLG9CQUpBNkUsRUFBQTdFLElBQUFnRixFQVVBLEdBQUF6QyxFQUFBTixVQUFBLENBQ0EsSUFBQWlELEVBQUFoRCxJQUVBb0IsRUFBQXJCLE1BQUFtQyxFQUFBN0IsSUFFQXVDLEVBQUFLLEVBQUFDLEtBQUEsS0FBQTlCLEVBQUE0QixHQUFBLEdBQ0FILEVBQUFJLEVBQUFDLEtBQUEsS0FBQTlCLEVBQUE0QixHQUFBLFFBR0FMLEVBQUF6QixXQUNBLG1CQUFBaUMsS0FDQSxtQkFBQUEsSUFBQUMsaUJBQ0EsbUJBQUFELElBQUFFLGlCQUNBLG1CQUFBQyxNQUNBLG1CQUFBQyxNQUVBbkMsRUF4REEsU0FBQWYsR0FDQSxJQUFBbUQsRUFBQXRILFNBQUFpRyxjQUFBLFFBVUEsWUFSQXZGLElBQUF5RCxFQUFBK0IsTUFBQUMsT0FDQWhDLEVBQUErQixNQUFBQyxLQUFBLFlBRUFoQyxFQUFBK0IsTUFBQXFCLElBQUEsYUFFQW5CLEVBQUFrQixFQUFBbkQsRUFBQStCLE9BQ0FqQixFQUFBZCxFQUFBbUQsR0FFQUEsRUE2Q0FFLENBQUFyRCxHQUNBdUMsRUFpRkEsU0FBQVksRUFBQW5ELEVBQUFzQyxHQUNBLElBQUE3RSxFQUFBNkUsRUFBQTdFLElBQ0FvRCxFQUFBeUIsRUFBQXpCLFVBUUF5QyxPQUFBL0csSUFBQXlELEVBQUF1RCx1QkFBQTFDLEdBRUFiLEVBQUF1RCx1QkFBQUQsS0FDQTdGLEVBQUFvQyxFQUFBcEMsSUFHQW9ELElBRUFwRCxHQUFBLHVEQUF1RHlGLEtBQUFNLFNBQUFDLG1CQUFBL0UsS0FBQUMsVUFBQWtDLE1BQUEsT0FHdkQsSUFBQTZDLEVBQUEsSUFBQVQsTUFBQXhGLElBQTZCdUUsS0FBQSxhQUU3QjJCLEVBQUFSLEVBQUFTLEtBRUFULEVBQUFTLEtBQUFkLElBQUFDLGdCQUFBVyxHQUVBQyxHQUFBYixJQUFBRSxnQkFBQVcsSUE1R0FkLEtBQUEsS0FBQTlCLEVBQUFmLEdBQ0F3QyxFQUFBLFdBQ0FoQixFQUFBVCxHQUVBQSxFQUFBNkMsTUFBQWQsSUFBQUUsZ0JBQUFqQyxFQUFBNkMsU0FHQTdDLEVBQUFjLEVBQUE3QixHQUNBdUMsRUFzREEsU0FBQXhCLEVBQUF1QixHQUNBLElBQUE3RSxFQUFBNkUsRUFBQTdFLElBQ0FtRCxFQUFBMEIsRUFBQTFCLE1BRUFBLEdBQ0FHLEVBQUFzQixhQUFBLFFBQUF6QixHQUdBLEdBQUFHLEVBQUE4QyxXQUNBOUMsRUFBQThDLFdBQUFDLFFBQUFyRyxNQUNFLENBQ0YsS0FBQXNELEVBQUFPLFlBQ0FQLEVBQUFXLFlBQUFYLEVBQUFPLFlBR0FQLEVBQUFNLFlBQUF4RixTQUFBa0ksZUFBQXRHLE1BckVBb0YsS0FBQSxLQUFBOUIsR0FDQXlCLEVBQUEsV0FDQWhCLEVBQUFULEtBTUEsT0FGQXdCLEVBQUFELEdBRUEsU0FBQTBCLEdBQ0EsR0FBQUEsRUFBQSxDQUNBLEdBQ0FBLEVBQUF2RyxNQUFBNkUsRUFBQTdFLEtBQ0F1RyxFQUFBcEQsUUFBQTBCLEVBQUExQixPQUNBb0QsRUFBQW5ELFlBQUF5QixFQUFBekIsVUFFQSxPQUdBMEIsRUFBQUQsRUFBQTBCLFFBRUF4QixLQXpPQTlLLEVBQUFELFFBQUEsU0FBQStJLEVBQUFSLEdBQ0EsdUJBQUFpRSxjQUNBLGlCQUFBcEksU0FBQSxVQUFBK0IsTUFBQSxpRUFHQW9DLFNBRUErQixNQUFBLGlCQUFBL0IsRUFBQStCLE1BQUEvQixFQUFBK0IsU0FJQS9CLEVBQUFOLFdBQUEsa0JBQUFNLEVBQUFOLFlBQUFNLEVBQUFOLFVBQUFYLEtBR0FpQixFQUFBZ0IsYUFBQWhCLEVBQUFnQixXQUFBLFFBR0FoQixFQUFBa0IsV0FBQWxCLEVBQUFrQixTQUFBLFVBRUEsSUFBQW5CLEVBQUFRLEVBQUFDLEVBQUFSLEdBSUEsT0FGQUYsRUFBQUMsRUFBQUMsR0FFQSxTQUFBa0UsR0FHQSxJQUZBLElBQUFDLEtBRUF4TSxFQUFBLEVBQWlCQSxFQUFBb0ksRUFBQWxGLE9BQW1CbEQsSUFBQSxDQUNwQyxJQUFBc0ksRUFBQUYsRUFBQXBJLElBQ0F1SSxFQUFBcEIsRUFBQW1CLEVBQUExQyxLQUVBNEMsT0FDQWdFLEVBQUExSixLQUFBeUYsR0FHQWdFLEdBRUFwRSxFQURBUyxFQUFBMkQsRUFBQWxFLEdBQ0FBLEdBR0EsSUFBQXJJLEVBQUEsRUFBaUJBLEVBQUF3TSxFQUFBdEosT0FBc0JsRCxJQUFBLENBQ3ZDLElBQUF1SSxFQUVBLFFBRkFBLEVBQUFpRSxFQUFBeE0sSUFFQXdJLEtBQUEsQ0FDQSxRQUFBQyxFQUFBLEVBQW1CQSxFQUFBRixFQUFBRyxNQUFBeEYsT0FBMkJ1RixJQUFBRixFQUFBRyxNQUFBRCxZQUU5Q3RCLEVBQUFvQixFQUFBM0MsUUFpTUEsSUFDQTZHLEVBREFDLEdBQ0FELEtBRUEsU0FBQWpLLEVBQUFtSyxHQUdBLE9BRkFGLEVBQUFqSyxHQUFBbUssRUFFQUYsRUFBQUcsT0FBQUMsU0FBQUMsS0FBQSxRQUlBLFNBQUE3QixFQUFBN0IsRUFBQTVHLEVBQUFxSSxFQUFBRixHQUNBLElBQUE3RSxFQUFBK0UsRUFBQSxHQUFBRixFQUFBN0UsSUFFQSxHQUFBc0QsRUFBQThDLFdBQ0E5QyxFQUFBOEMsV0FBQUMsUUFBQU8sRUFBQWxLLEVBQUFzRCxPQUNFLENBQ0YsSUFBQWlILEVBQUE3SSxTQUFBa0ksZUFBQXRHLEdBQ0FrSCxFQUFBNUQsRUFBQTRELFdBRUFBLEVBQUF4SyxJQUFBNEcsRUFBQVcsWUFBQWlELEVBQUF4SyxJQUVBd0ssRUFBQTlKLE9BQ0FrRyxFQUFBSyxhQUFBc0QsRUFBQUMsRUFBQXhLLElBRUE0RyxFQUFBTSxZQUFBcUQsb0JDbFVBaE4sRUFBQUQsUUFBQSxTQUFBbU4sR0FDQSxJQUFBcEUsS0F3Q0EsT0FyQ0FBLEVBQUFxRSxTQUFBLFdBQ0EsT0FBQXJMLEtBQUFzTCxJQUFBLFNBQUE3RSxHQUNBLElBQUE4RSxFQXNDQSxTQUFBOUUsRUFBQTJFLEdBQ0EsSUFBQUcsRUFBQTlFLEVBQUEsT0FDQStFLEVBQUEvRSxFQUFBLEdBQ0EsSUFBQStFLEVBQ0EsT0FBQUQsRUFHQSxHQUFBSCxHQUFBLG1CQUFBMUIsS0FBQSxDQUNBLElBQUErQixHQVlBcEUsRUFaQW1FLEVBaUJBLG1FQUhBOUIsS0FBQU0sU0FBQUMsbUJBQUEvRSxLQUFBQyxVQUFBa0MsTUFHQSxPQWhCQXFFLEVBQUFGLEVBQUFHLFFBQUFMLElBQUEsU0FBQU0sR0FDQSx1QkFBQUosRUFBQUssV0FBQUQsRUFBQSxRQUdBLE9BQUFMLEdBQUF0SixPQUFBeUosR0FBQXpKLFFBQUF3SixJQUFBUixLQUFBLE1BT0EsSUFBQTVELEVBSkEsT0FBQWtFLEdBQUFOLEtBQUEsTUF0REFhLENBQUFyRixFQUFBMkUsR0FDQSxPQUFBM0UsRUFBQSxHQUNBLFVBQUFBLEVBQUEsT0FBbUM4RSxFQUFBLElBRW5DQSxJQUVHTixLQUFBLEtBSUhqRSxFQUFBN0ksRUFBQSxTQUFBRSxFQUFBME4sR0FDQSxpQkFBQTFOLElBQ0FBLElBQUEsS0FBQUEsRUFBQSxNQUVBLElBREEsSUFBQTJOLEtBQ0E3TixFQUFBLEVBQWdCQSxFQUFBNkIsS0FBQXFCLE9BQWlCbEQsSUFBQSxDQUNqQyxJQUFBNEYsRUFBQS9ELEtBQUE3QixHQUFBLEdBQ0EsaUJBQUE0RixJQUNBaUksRUFBQWpJLElBQUEsR0FFQSxJQUFBNUYsRUFBQSxFQUFZQSxFQUFBRSxFQUFBZ0QsT0FBb0JsRCxJQUFBLENBQ2hDLElBQUFzSSxFQUFBcEksRUFBQUYsR0FLQSxpQkFBQXNJLEVBQUEsSUFBQXVGLEVBQUF2RixFQUFBLE1BQ0FzRixJQUFBdEYsRUFBQSxHQUNBQSxFQUFBLEdBQUFzRixFQUNLQSxJQUNMdEYsRUFBQSxPQUFBQSxFQUFBLGFBQUFzRixFQUFBLEtBRUEvRSxFQUFBL0YsS0FBQXdGLE1BSUFPLHFCQzlDQTlJLEVBQUFELFFBQUFGLEVBQUEsRUFBQUEsRUFBQSxJQUtBa0QsTUFBQS9DLEVBQUFDLEVBQUEsa3dCQUF5eEIsc0JDSnp4QixJQUFBb04sRUFBQXhOLEVBQUEsR0FFQSxpQkFBQXdOLFFBQUFyTixFQUFBQyxFQUFBb04sRUFBQSxNQU9BLElBQUEvRSxHQUFleUYsS0FBQSxFQUVmL0MsZUFQQUEsRUFRQTFCLGdCQUFBekUsR0FFQWhGLEVBQUEsRUFBQUEsQ0FBQXdOLEVBQUEvRSxHQUVBK0UsRUFBQVcsU0FBQWhPLEVBQUFELFFBQUFzTixFQUFBVyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHgsIHkpIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9O1xyXG4gICAgZ2V0IGNyb3NzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IodGhpcy54ICsgMSwgdGhpcy55KSxcclxuICAgICAgICAgICAgbmV3IFZlY3Rvcih0aGlzLnggLSAxLCB0aGlzLnkpLFxyXG4gICAgICAgICAgICBuZXcgVmVjdG9yKHRoaXMueCwgdGhpcy55ICsgMSksXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IodGhpcy54LCB0aGlzLnkgLSAxKVxyXG4gICAgICAgIF1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL3ZlY3RvclwiO1xyXG5pbXBvcnQgR3JpZCBmcm9tICcuL2dyaWQnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0YXJ0UG9pbnQgPSBuZXcgVmVjdG9yKDAsMCk7XHJcbmV4cG9ydCBjb25zdCBlbmRQb2ludCAgID0gbmV3IFZlY3Rvcig5LDkpO1xyXG5cclxuLy8gU3ltYm9sIGRlZmluaXRpb25zXHJcbmV4cG9ydCBjb25zdCBzdGFydFN5bWJvbCA9ICdTJyxcclxuICAgIGVuZFN5bWJvbCA9ICdFJyxcclxuICAgIHdhbGxTeW1ib2wgPSAnVycsXHJcbiAgICByb3V0ZVN5bWJvbCA9ICdSJztcclxuXHJcbmV4cG9ydCB2YXIgbWF6ZUdyaWQgPSBuZXcgR3JpZDsiLCJpbXBvcnQgVmVjdG9yIGZyb20gJy4vdmVjdG9yJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdyaWQge1xyXG4gICAgY29uc3RydWN0b3Iod2lkdGggPSAxMCwgaGVpZ2h0ID0gMTApIHtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zcGFjZSA9IG5ldyBBcnJheSh3aWR0aCAqIGhlaWdodCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlzSW5zaWRlKHZlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiB2ZWN0b3IueCA+PSAwICYmIHZlY3Rvci54IDwgdGhpcy53aWR0aCAmJlxyXG4gICAgICAgICAgICB2ZWN0b3IueSA+PSAwICYmIHZlY3Rvci55IDwgdGhpcy5oZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBnZXRWYWx1ZSh2ZWN0b3IpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcGFjZVt2ZWN0b3IueCArIHRoaXMud2lkdGggKiB2ZWN0b3IueV07XHJcbiAgICB9XHJcbiAgICBzZXRWYWx1ZSh2ZWN0b3IsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zcGFjZVt2ZWN0b3IueCArIHRoaXMud2lkdGggKiB2ZWN0b3IueV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGNsZWFyU3BhY2UoKSB7XHJcbiAgICAgICAgdGhpcy5zcGFjZSA9IHRoaXMuc3BhY2UuZmlsbCgwKTtcclxuICAgIH1cclxuICAgIGdldFZlY3RvcihpbmRleCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKCBpbmRleCAlIHRoaXMud2lkdGgsIE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLndpZHRoKSk7XHJcbiAgICB9XHJcbiAgICBnZXRWZWN0b3JzV2l0aFZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgbGV0IHZlY3RvcnNBcnJheSA9IFtdO1xyXG4gICAgICAgIHRoaXMuc3BhY2UuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZlY3RvcnNBcnJheS5wdXNoKHRoaXMuZ2V0VmVjdG9yKGluZGV4KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdmVjdG9yc0FycmF5O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtzdGFydFBvaW50LCBlbmRQb2ludCwgc3RhcnRTeW1ib2wsIGVuZFN5bWJvbCwgd2FsbFN5bWJvbCwgbWF6ZUdyaWQsIHJvdXRlU3ltYm9sfSBmcm9tIFwiLi9jb25zdFwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZpbGxaZXJvcyA9IChncmlkKSA9PiB7XHJcbiAgICBmb3IgKGxldCBpID0gZ3JpZC5zcGFjZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIGlmIChncmlkLnNwYWNlW2ldICE9PSB3YWxsU3ltYm9sXHJcbiAgICAgICAgICAgICYmIGdyaWQuc3BhY2VbaV0gIT09IHN0YXJ0U3ltYm9sXHJcbiAgICAgICAgICAgICYmIGdyaWQuc3BhY2VbaV0gIT09IGVuZFN5bWJvbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGdyaWQuc3BhY2VbaV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBncmlkO1xyXG59O1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBmaWxsV2F2ZXMgPSAoZ3JpZCkgPT4ge1xyXG5cclxuICAgIHN0YXJ0UG9pbnQuY3Jvc3MuZm9yRWFjaChmaXJzdFR1cm5WZWN0b3IgPT4ge1xyXG4gICAgICAgIGlmIChncmlkLmlzSW5zaWRlKGZpcnN0VHVyblZlY3RvcikgJiYgZ3JpZC5nZXRWYWx1ZShmaXJzdFR1cm5WZWN0b3IpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGdyaWQuc2V0VmFsdWUoZmlyc3RUdXJuVmVjdG9yLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmb3IgKGxldCB0dXJuTnVtYmVyID0gMTsgZ3JpZC5zcGFjZS5pbmNsdWRlcygwKTsgdHVybk51bWJlcisrKSB7XHJcbiAgICAgICAgbGV0IHByZXZWZWN0b3JzQXJyYXkgPSBncmlkLmdldFZlY3RvcnNXaXRoVmFsdWUodHVybk51bWJlcik7XHJcbiAgICAgICAgbGV0IHRhcmdldFZlY3RvcnNBcnJheSA9IFtdO1xyXG4gICAgICAgIGxldCB0YXJnZXRWYWx1ZXNBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICBwcmV2VmVjdG9yc0FycmF5LmZvckVhY2godmVjdG9yUHJldiA9PiB7XHJcbiAgICAgICAgICAgIHRhcmdldFZlY3RvcnNBcnJheSA9IHRhcmdldFZlY3RvcnNBcnJheS5jb25jYXQodmVjdG9yUHJldi5jcm9zcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGFyZ2V0VmVjdG9yc0FycmF5LmZvckVhY2goIHZlY3RvciA9PiB7XHJcbiAgICAgICAgICAgIGlmIChncmlkLmlzSW5zaWRlKHZlY3RvcikpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldFZhbHVlc0FycmF5LnB1c2goZ3JpZC5nZXRWYWx1ZSh2ZWN0b3IpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0YXJnZXRWYWx1ZXNBcnJheS5pbmRleE9mKDApID09PSAtMSApIHtcclxuICAgICAgICAgICAgLy8gYWxlcnQoXCJUaGlzIG1hemUgZG9lc24ndCBoYXZlIHNvbHV0aW9uc1wiKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXJnZXRWYWx1ZXNBcnJheS5pbmRleE9mKGVuZFN5bWJvbCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIC8vIGFsZXJ0KFwiU2hvcnRlc3Qgd2F5IHJlYWNoZWQhXCIpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhcmdldFZlY3RvcnNBcnJheS5mb3JFYWNoKCB2ZWN0b3IgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZ3JpZC5pc0luc2lkZSh2ZWN0b3IpICYmIGdyaWQuZ2V0VmFsdWUodmVjdG9yKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZ3JpZC5zZXRWYWx1ZSh2ZWN0b3IsIHR1cm5OdW1iZXIgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdldE1hemVSb3V0ZSA9IChmaWxsZWRHcmlkKSA9PiB7XHJcbiAgICBsZXQgcm91dGUgPSBbXTtcclxuICAgIGxldCBwcmV2U3RlcDtcclxuICAgIGxldCBwcmV2U3RlcFZhbHVlID0gSW5maW5pdHk7XHJcblxyXG4gICAgcHJldlN0ZXAgPSBlbmRQb2ludC5jcm9zcy5maW5kKHZlY3RvciA9PiB7XHJcbiAgICAgICAgaWYgKCFmaWxsZWRHcmlkLmlzSW5zaWRlKHZlY3RvcikpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IHZhbHVlID0gZmlsbGVkR3JpZC5nZXRWYWx1ZSh2ZWN0b3IpO1xyXG5cclxuICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIodmFsdWUpIHx8IHZhbHVlID09PSAwKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHByZXZTdGVwVmFsdWUgPSBNYXRoLm1pbihwcmV2U3RlcFZhbHVlLCB2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHByZXZTdGVwVmFsdWUgPT09IHZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHByZXZTdGVwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBhbGVydCgnVGhpcyBtYXplIGRvZXNuXFwndCBoYXZlIHNvbHV0aW9ucycpO1xyXG4gICAgICAgIHJvdXRlID0gW107XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcm91dGUudW5zaGlmdChwcmV2U3RlcCk7XHJcblxyXG4gICAgd2hpbGUgKHByZXZTdGVwVmFsdWUgPiAxKSB7XHJcbiAgICAgICAgcHJldlN0ZXAgPSBwcmV2U3RlcC5jcm9zcy5maW5kKCB2ZWN0b3IgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWZpbGxlZEdyaWQuaXNJbnNpZGUodmVjdG9yKSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gZmlsbGVkR3JpZC5nZXRWYWx1ZSh2ZWN0b3IpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHZhbHVlKSB8fCB2YWx1ZSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcHJldlN0ZXBWYWx1ZSA9IE1hdGgubWluKHByZXZTdGVwVmFsdWUsIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZTdGVwVmFsdWUgPT09IHZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJvdXRlLnVuc2hpZnQocHJldlN0ZXApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJvdXRlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluc2VydFJvdXRlID0gKHJvdXRlQXJyYXkpID0+IHtcclxuICAgIGlmICghcm91dGVBcnJheSkge1xyXG4gICAgICAgIC8vIGFsZXJ0KCdUaGlzIG1hemUgZG9lc25cXCd0IGhhdmUgc29sdXRpb25zJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcm91dGVBcnJheS5mb3JFYWNoKHZlY3RvciA9PiB7XHJcbiAgICAgICAgbWF6ZUdyaWQuc2V0VmFsdWUodmVjdG9yLCByb3V0ZVN5bWJvbCk7XHJcbiAgICB9KVxyXG59OyIsImltcG9ydCB7ZmlsbFdhdmVzLCBmaWxsWmVyb3MsIGdldE1hemVSb3V0ZSwgaW5zZXJ0Um91dGV9IGZyb20gXCIuL2ZpbGxcIjtcclxuaW1wb3J0IHtlbmRQb2ludCwgZW5kU3ltYm9sLCBtYXplR3JpZCwgc3RhcnRQb2ludCwgc3RhcnRTeW1ib2x9IGZyb20gXCIuL2NvbnN0XCI7XHJcblxyXG5leHBvcnQgY29uc3QgY2xpY2tIYW5kbGVyRmllbGQgPSBlID0+IHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKHRhcmdldC5jbGFzc05hbWUgIT09ICdtYXplX19jZWxsJykgcmV0dXJuO1xyXG4gICAgbGV0IGRhdGFzZXQgPSB0YXJnZXQuZGF0YXNldDtcclxuICAgIGlmIChkYXRhc2V0LnZhbHVlID09PSBcIldcIikge1xyXG4gICAgICAgIGRhdGFzZXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIG1hemVHcmlkLnNwYWNlW2RhdGFzZXQuaW5kZXhdID0gMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGF0YXNldC52YWx1ZSA9IFwiV1wiO1xyXG4gICAgICAgIG1hemVHcmlkLnNwYWNlW2RhdGFzZXQuaW5kZXhdID0gJ1cnO1xyXG4gICAgfVxyXG4gICAgZmlsbFplcm9zKG1hemVHcmlkKTtcclxuICAgIGRpc3BsYXkobWF6ZUdyaWQpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkhhbmRsZXIgPSBlID0+IHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKHRhcmdldC50YWdOYW1lICE9PSAnQlVUVE9OJykgcmV0dXJuO1xyXG4gICAgc3dpdGNoICh0YXJnZXQuaWQpIHtcclxuICAgICAgICBjYXNlICdydW4nOlxyXG4gICAgICAgICAgICBydW4oKTtcclxuICAgICAgICAgICAgZGlzcGxheShtYXplR3JpZCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3Jlc2V0JzpcclxuICAgICAgICAgICAgcmVzZXQoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZGlzcGxheSA9IChncmlkKSA9PiB7XHJcbiAgICBsZXQgbWF6ZUNlbGxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hemUnKS5jaGlsZHJlbjtcclxuICAgIGdyaWQuc3BhY2UuZm9yRWFjaCggKHZhbHVlLCBpKSA9PiB7XHJcbiAgICAgICAgbWF6ZUNlbGxzW2ldLmRhdGFzZXQudmFsdWUgPSB2YWx1ZTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuY29uc3QgcnVuID0gKCkgPT4ge1xyXG4gICAgZmlsbFplcm9zKG1hemVHcmlkKTtcclxuICAgIGZpbGxXYXZlcyhtYXplR3JpZCk7XHJcbiAgICBsZXQgcm91dGUgPSBnZXRNYXplUm91dGUobWF6ZUdyaWQpO1xyXG4gICAgaW5zZXJ0Um91dGUocm91dGUpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fuc3dlcicpLmlubmVyVGV4dCA9IHJvdXRlID8gcm91dGUubGVuZ3RoIDogJyMjJztcclxufTtcclxuXHJcbmNvbnN0IHJlc2V0ID0gKCkgPT4ge1xyXG4gICAgbWF6ZUdyaWQuY2xlYXJTcGFjZSgpO1xyXG4gICAgbWF6ZUdyaWQuc2V0VmFsdWUoc3RhcnRQb2ludCwgc3RhcnRTeW1ib2wpO1xyXG4gICAgbWF6ZUdyaWQuc2V0VmFsdWUoZW5kUG9pbnQsIGVuZFN5bWJvbCk7XHJcbiAgICBkaXNwbGF5KG1hemVHcmlkKTtcclxufTtcclxuIiwiaW1wb3J0IFZlY3RvciBmcm9tICcuL2pzL3ZlY3Rvci5qcyc7XHJcbmltcG9ydCB7IGZpbGxXYXZlcywgZmlsbFplcm9zIH0gZnJvbSBcIi4vanMvZmlsbC5qc1wiO1xyXG5pbXBvcnQgeyBtYXplR3JpZCwgc3RhcnRQb2ludCwgZW5kUG9pbnQsIGVuZFN5bWJvbCwgc3RhcnRTeW1ib2wsIHdhbGxTeW1ib2x9IGZyb20gJy4vanMvY29uc3QuanMnO1xyXG5pbXBvcnQgeyBjbGlja0hhbmRsZXJGaWVsZCwgYnV0dG9uSGFuZGxlciwgZGlzcGxheSB9IGZyb20gXCIuL2pzL2Jyb3dzZXIuanNcIjtcclxuXHJcbmltcG9ydCAnLi9zdHlsZS5jc3MnO1xyXG5cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRyb2wnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGJ1dHRvbkhhbmRsZXIpO1xyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWF6ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tIYW5kbGVyRmllbGQpO1xyXG5cclxubWF6ZUdyaWQuc2V0VmFsdWUoc3RhcnRQb2ludCwgc3RhcnRTeW1ib2wpO1xyXG5tYXplR3JpZC5zZXRWYWx1ZShlbmRQb2ludCwgZW5kU3ltYm9sKTtcclxuXHJcbm1hemVHcmlkLnNldFZhbHVlKG5ldyBWZWN0b3IoMSwwKSwgd2FsbFN5bWJvbCk7XHJcbm1hemVHcmlkLnNldFZhbHVlKG5ldyBWZWN0b3IoMSwxKSwgd2FsbFN5bWJvbCk7XHJcblxyXG5maWxsWmVyb3MobWF6ZUdyaWQpO1xyXG5maWxsV2F2ZXMobWF6ZUdyaWQpO1xyXG5kaXNwbGF5KG1hemVHcmlkKTtcclxuIiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvICsgXCIgXCIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cbiIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih1c2VTb3VyY2VNYXApIHtcblx0dmFyIGxpc3QgPSBbXTtcblxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXHRcdFx0aWYoaXRlbVsyXSkge1xuXHRcdFx0XHRyZXR1cm4gXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBjb250ZW50ICsgXCJ9XCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gY29udGVudDtcblx0XHRcdH1cblx0XHR9KS5qb2luKFwiXCIpO1xuXHR9O1xuXG5cdC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcblx0XHRcdG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIFwiXCJdXTtcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG5cdFx0fVxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcblx0XHRcdC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuXHRcdFx0Ly8gIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gbWVkaWFRdWVyeTtcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7XG5cdHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblx0aWYgKCFjc3NNYXBwaW5nKSB7XG5cdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdH1cblxuXHRpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0dmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG5cdFx0dmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcblx0XHRcdHJldHVybiAnLyojIHNvdXJjZVVSTD0nICsgY3NzTWFwcGluZy5zb3VyY2VSb290ICsgc291cmNlICsgJyAqLydcblx0XHR9KTtcblxuXHRcdHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuXHR9XG5cblx0cmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn1cblxuLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcblx0dmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG5cdHZhciBkYXRhID0gJ3NvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCcgKyBiYXNlNjQ7XG5cblx0cmV0dXJuICcvKiMgJyArIGRhdGEgKyAnICovJztcbn1cbiIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiYm9keSB7XFxyXFxuICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xcclxcbn1cXHJcXG4ubWF6ZSB7XFxyXFxuICAgIGRpc3BsYXk6IGdyaWQ7XFxyXFxuICAgIGdyaWQ6IHJlcGVhdCgxMCwgMjVweCkgLyByZXBlYXQoMTAsIDI1cHgpO1xcclxcbn1cXHJcXG4ubWF6ZV9fY2VsbCB7XFxyXFxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxyXFxuICAgIGJvcmRlcjogdGhpbiBkYXNoZWQgbGlnaHRncmF5O1xcclxcbn1cXHJcXG5bZGF0YS12YWx1ZSA9IFddIHtcXHJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XFxyXFxufVxcclxcbltkYXRhLXZhbHVlID0gUl0ge1xcclxcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciwgYmxhY2sgMjAlLCB0cmFuc3BhcmVudCAyMCUpO1xcclxcbn1cXHJcXG5bZGF0YS12YWx1ZSA9IFNdIHtcXHJcXG4gICAgYmFja2dyb3VuZC1pbWFnZTogcmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCBjZW50ZXIsIGJsYWNrIDUwJSwgdHJhbnNwYXJlbnQgNTAlKTtcXHJcXG59XFxyXFxuW2RhdGEtdmFsdWUgPSBFXSB7XFxyXFxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHJhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgY2VudGVyLCB0cmFuc3BhcmVudCAyMCUsIGJsYWNrIDIwJSwgYmxhY2sgNTAlLCB0cmFuc3BhcmVudCA1MCUpO1xcclxcbn1cXHJcXG5cXHJcXG4uY29udHJvbCB7XFxyXFxuICAgIHBhZGRpbmc6IDEwcHg7XFxyXFxufVxcclxcbi5jb250cm9sX19idXR0b24ge1xcclxcbiAgICB3aWR0aDogNTBweDtcXHJcXG4gICAgaGVpZ2h0OiAyMHB4O1xcclxcbn1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZS5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGUuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZS5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iXSwic291cmNlUm9vdCI6IiJ9